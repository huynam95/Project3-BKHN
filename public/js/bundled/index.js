var t,e,r,n,o,a,i,u,c,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},p=function(t){return t&&t.Math==Math&&t};l=p("object"==typeof globalThis&&globalThis)||p("object"==typeof window&&window)||p("object"==typeof self&&self)||p("object"==typeof s&&s)||function(){return this}()||l||Function("return this")();var f={},d={};f=!(d=function(t){try{return!!t()}catch(t){return!0}})(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]});var y={},v={},g={},m={};m=!d(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")});var h=Function.prototype,b=h.call,w=m&&h.bind.bind(b,b);g=m?w:function(t){return function(){return b.apply(t,arguments)}};var S={},A={},E="object"==typeof document&&document.all,T=(A={all:E,IS_HTMLDDA:void 0===E&&void 0!==E}).all;S=A.IS_HTMLDDA?function(t){return"function"==typeof t||t===T}:function(t){return"function"==typeof t};var O={},j={},_={},I={};I=function(t){return null==t};var P=TypeError;_=function(t){if(I(t))throw P("Can't call method on "+t);return t};var C=Object;j=function(t){return C(_(t))};var k=g({}.hasOwnProperty),D=Function.prototype,B=f&&Object.getOwnPropertyDescriptor,M=(O=Object.hasOwn||function(t,e){return k(j(t),e)})(D,"name")&&(!f||f&&B(D,"name").configurable),R={},F={},U={},x=Object.defineProperty;U=function(t,e){try{x(l,t,{value:e,configurable:!0,writable:!0})}catch(r){l[t]=e}return e};var q="__core-js_shared__";F=l[q]||U(q,{});var z=g(Function.toString);S(F.inspectSource)||(F.inspectSource=function(t){return z(t)}),R=F.inspectSource;var N={},H={},W=l.WeakMap;H=S(W)&&/native code/.test(String(W));var V={},$=A.all;V=A.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:S(t)||t===$}:function(t){return"object"==typeof t?null!==t:S(t)};var Y={},G={},J={},K=l.document,Q=V(K)&&V(K.createElement);J=function(t){return Q?K.createElement(t):{}},G=!f&&!d(function(){return 7!=Object.defineProperty(J("div"),"a",{get:function(){return 7}}).a});var Z={};Z=f&&d(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var X={},tt=String,te=TypeError;X=function(t){if(V(t))return t;throw te(tt(t)+" is not an object")};var tr={},tn={},to={},ta=Function.prototype.call;to=m?ta.bind(ta):function(){return ta.apply(ta,arguments)};var ti={},tu={};tu=function(t,e){var r;return arguments.length<2?S(r=l[t])?r:void 0:l[t]&&l[t][e]};var tc={};tc=g({}.isPrototypeOf);var ts={},tl={},tp={},tf={};tf="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var td=l.process,ty=l.Deno,tv=td&&td.versions||ty&&ty.version,tg=tv&&tv.v8;tg&&(r=(e=tg.split("."))[0]>0&&e[0]<4?1:+(e[0]+e[1])),!r&&tf&&(!(e=tf.match(/Edge\/(\d+)/))||e[1]>=74)&&(e=tf.match(/Chrome\/(\d+)/))&&(r=+e[1]),tp=r;var tm=l.String;ts=(tl=!!Object.getOwnPropertySymbols&&!d(function(){var t=Symbol();return!tm(t)||!(Object(t) instanceof Symbol)||!Symbol.sham&&tp&&tp<41}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var th=Object;ti=ts?function(t){return"symbol"==typeof t}:function(t){var e=tu("Symbol");return S(e)&&tc(e.prototype,th(t))};var tb={},tw={},tS={},tA=String;tS=function(t){try{return tA(t)}catch(t){return"Object"}};var tE=TypeError;tw=function(t){if(S(t))return t;throw tE(tS(t)+" is not a function")},tb=function(t,e){var r=t[e];return I(r)?void 0:tw(r)};var tT={},tO=TypeError;tT=function(t,e){var r,n;if("string"===e&&S(r=t.toString)&&!V(n=to(r,t))||S(r=t.valueOf)&&!V(n=to(r,t))||"string"!==e&&S(r=t.toString)&&!V(n=to(r,t)))return n;throw tO("Can't convert object to primitive value")};var tj={},t_={},tI={};tI=!1,(t_=function(t,e){return F[t]||(F[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.31.0",mode:tI?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"});var tP={},tC=0,tk=Math.random(),tD=g(1..toString);tP=function(t){return"Symbol("+(void 0===t?"":t)+")_"+tD(++tC+tk,36)};var tB=l.Symbol,tM=t_("wks"),tR=ts?tB.for||tB:tB&&tB.withoutSetter||tP,tL=TypeError,tF=(tj=function(t){return O(tM,t)||(tM[t]=tl&&O(tB,t)?tB[t]:tR("Symbol."+t)),tM[t]})("toPrimitive");tn=function(t,e){if(!V(t)||ti(t))return t;var r,n=tb(t,tF);if(n){if(void 0===e&&(e="default"),!V(r=to(n,t,e))||ti(r))return r;throw tL("Can't convert object to primitive value")}return void 0===e&&(e="number"),tT(t,e)},tr=function(t){var e=tn(t,"string");return ti(e)?e:e+""};var tU=TypeError,tx=Object.defineProperty,tq=Object.getOwnPropertyDescriptor,tz="enumerable",tN="configurable",tH="writable";t=f?Z?function(t,e,r){if(X(t),e=tr(e),X(r),"function"==typeof t&&"prototype"===e&&"value"in r&&tH in r&&!r[tH]){var n=tq(t,e);n&&n[tH]&&(t[e]=r.value,r={configurable:tN in r?r[tN]:n[tN],enumerable:tz in r?r[tz]:n[tz],writable:!1})}return tx(t,e,r)}:tx:function(t,e,r){if(X(t),e=tr(e),X(r),G)try{return tx(t,e,r)}catch(t){}if("get"in r||"set"in r)throw tU("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var tW={};tW=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Y=f?function(e,r,n){return t(e,r,tW(1,n))}:function(t,e,r){return t[e]=r,t};var tV={},t$=t_("keys");tV=function(t){return t$[t]||(t$[t]=tP(t))};var tY={};tY={};var tG="Object already initialized",tJ=l.TypeError,tK=l.WeakMap;if(H||F.state){var tQ=F.state||(F.state=new tK);tQ.get=tQ.get,tQ.has=tQ.has,tQ.set=tQ.set,n=function(t,e){if(tQ.has(t))throw tJ(tG);return e.facade=t,tQ.set(t,e),e},o=function(t){return tQ.get(t)||{}},a=function(t){return tQ.has(t)}}else{var tZ=tV("state");tY[tZ]=!0,n=function(t,e){if(O(t,tZ))throw tJ(tG);return e.facade=t,Y(t,tZ,e),e},o=function(t){return O(t,tZ)?t[tZ]:{}},a=function(t){return O(t,tZ)}}var tX=(N={set:n,get:o,has:a,enforce:function(t){return a(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!V(e)||(r=o(e)).type!==t)throw tJ("Incompatible receiver, "+t+" required");return r}}}).enforce,t0=N.get,t1=String,t2=Object.defineProperty,t4=g("".slice),t3=g("".replace),t8=g([].join),t9=f&&!d(function(){return 8!==t2(function(){},"length",{value:8}).length}),t6=String(String).split("String"),t5=v=function(t,e,r){"Symbol("===t4(t1(e),0,7)&&(e="["+t3(t1(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!O(t,"name")||M&&t.name!==e)&&(f?t2(t,"name",{value:e,configurable:!0}):t.name=e),t9&&r&&O(r,"arity")&&t.length!==r.arity&&t2(t,"length",{value:r.arity});try{r&&O(r,"constructor")&&r.constructor?f&&t2(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=tX(t);return O(n,"source")||(n.source=t8(t6,"string"==typeof e?e:"")),t};Function.prototype.toString=t5(function(){return S(this)&&t0(this).source||R(this)},"toString"),y=function(e,r,n){return n.get&&v(n.get,r,{getter:!0}),n.set&&v(n.set,r,{setter:!0}),t(e,r,n)};"use strict";var t7={};t7=function(){var t=X(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e};"use strict";var et=l.RegExp,ee=et.prototype;f&&d(function(){var t=!0;try{et(".","d")}catch(e){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",o=function(t,n){Object.defineProperty(e,t,{get:function(){return r+=n,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var i in t&&(a.hasIndices="d"),a)o(i,a[i]);return Object.getOwnPropertyDescriptor(ee,"flags").get.call(e)!==n||r!==n})&&y(ee,"flags",{configurable:!0,get:t7});"use strict";var er={},en={};en="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var eo={},ea={},ei=tj("toStringTag"),eu={};eu[ei]="z",ea="[object z]"===String(eu);var ec={},es=g({}.toString),el=g("".slice);ec=function(t){return el(es(t),8,-1)};var ep=tj("toStringTag"),ef=Object,ed="Arguments"==ec(function(){return arguments}()),ey=function(t,e){try{return t[e]}catch(t){}};eo=ea?ec:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=ey(e=ef(t),ep))?r:ed?ec(e):"Object"==(n=ec(e))&&S(e.callee)?"Arguments":n};var ev={};ev=function(e,r,n,o){o||(o={});var a=o.enumerable,i=void 0!==o.name?o.name:r;if(S(n)&&v(n,i,o),o.global)a?e[r]=n:U(r,n);else{try{o.unsafe?e[r]&&(a=!0):delete e[r]}catch(t){}a?e[r]=n:t(e,r,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e};var eg={},em={};em=!d(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype});var eh=tV("IE_PROTO"),eb=Object,ew=eb.prototype;eg=em?eb.getPrototypeOf:function(t){var e=j(t);if(O(e,eh))return e[eh];var r=e.constructor;return S(r)&&e instanceof r?r.prototype:e instanceof eb?ew:null};var eS={},eA={};eA=function(t,e,r){try{return g(tw(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}};var eE={},eT=String,eO=TypeError;eE=function(t){if("object"==typeof t||S(t))return t;throw eO("Can't set "+eT(t)+" as a prototype")},eS=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=eA(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return X(r),eE(n),e?t(r,n):r.__proto__=n,r}}():void 0);var ej=N.enforce,e_=N.get,eI=l.Int8Array,eP=eI&&eI.prototype,eC=l.Uint8ClampedArray,ek=eC&&eC.prototype,eD=eI&&eg(eI),eB=eP&&eg(eP),eM=Object.prototype,eR=l.TypeError,eL=tj("toStringTag"),eF=tP("TYPED_ARRAY_TAG"),eU="TypedArrayConstructor",ex=en&&!!eS&&"Opera"!==eo(l.opera),eq=!1,ez={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},eN={BigInt64Array:8,BigUint64Array:8},eH=function(t){var e=eg(t);if(V(e)){var r=e_(e);return r&&O(r,eU)?r[eU]:eH(e)}},eW=function(t){if(!V(t))return!1;var e=eo(t);return O(ez,e)||O(eN,e)};for(i in ez)(c=(u=l[i])&&u.prototype)?ej(c)[eU]=u:ex=!1;for(i in eN)(c=(u=l[i])&&u.prototype)&&(ej(c)[eU]=u);if((!ex||!S(eD)||eD===Function.prototype)&&(eD=function(){throw eR("Incorrect invocation")},ex))for(i in ez)l[i]&&eS(l[i],eD);if((!ex||!eB||eB===eM)&&(eB=eD.prototype,ex))for(i in ez)l[i]&&eS(l[i].prototype,eB);if(ex&&eg(ek)!==eB&&eS(ek,eB),f&&!O(eB,eL))for(i in eq=!0,y(eB,eL,{configurable:!0,get:function(){return V(this)?this[eF]:void 0}}),ez)l[i]&&Y(l[i],eF,i);er={NATIVE_ARRAY_BUFFER_VIEWS:ex,TYPED_ARRAY_TAG:eq&&eF,aTypedArray:function(t){if(eW(t))return t;throw eR("Target is not a typed array")},aTypedArrayConstructor:function(t){if(S(t)&&(!eS||tc(eD,t)))return t;throw eR(tS(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(f){if(r)for(var o in ez){var a=l[o];if(a&&O(a.prototype,t))try{delete a.prototype[t]}catch(r){try{a.prototype[t]=e}catch(t){}}}(!eB[t]||r)&&ev(eB,t,r?e:ex&&eP[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(f){if(eS){if(r){for(n in ez)if((o=l[n])&&O(o,t))try{delete o[t]}catch(t){}}if(eD[t]&&!r)return;try{return ev(eD,t,r?e:ex&&eD[t]||e)}catch(t){}}for(n in ez)(o=l[n])&&(!o[t]||r)&&ev(o,t,e)}},getTypedArrayConstructor:eH,isView:function(t){if(!V(t))return!1;var e=eo(t);return"DataView"===e||O(ez,e)||O(eN,e)},isTypedArray:eW,TypedArray:eD,TypedArrayPrototype:eB};var eV={},e$={},eY={},eG={},eJ=Math.ceil,eK=Math.floor;eG=Math.trunc||function(t){var e=+t;return(e>0?eK:eJ)(e)},eY=function(t){var e=+t;return e!=e||0===e?0:eG(e)};var eQ=Math.min;e$=function(t){return t>0?eQ(eY(t),9007199254740991):0},eV=function(t){return e$(t.length)};var eZ={},eX={},e0=RangeError;eX=function(t){var e=eY(t);if(e<0)throw e0("The argument can't be less than 0");return e};var e1=RangeError;eZ=function(t,e){var r=eX(t);if(r%e)throw e1("Wrong offset");return r};var e2=l.RangeError,e4=l.Int8Array,e3=e4&&e4.prototype,e8=e3&&e3.set,e9=er.aTypedArray,e6=er.exportTypedArrayMethod,e5=!d(function(){var t=new Uint8ClampedArray(2);return to(e8,t,{length:1,0:3},1),3!==t[1]}),e7=e5&&er.NATIVE_ARRAY_BUFFER_VIEWS&&d(function(){var t=new e4(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]});e6("set",function(t){e9(this);var e=eZ(arguments.length>1?arguments[1]:void 0,1),r=j(t);if(e5)return to(e8,this,r,e);var n=this.length,o=eV(r),a=0;if(o+e>n)throw e2("Wrong length");for(;a<o;)this[e+a]=r[a++]},!e5||e7);const rt=()=>{let t=document.querySelector(".alert");t&&t.parentElement.removeChild(t)},re=(t,e,r=6)=>{rt();let n=`<div class="alert alert--${t}">${e}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",n),window.setTimeout(rt,1e3*r)},rr=async(t,e)=>{try{let r=await axios({method:"POST",url:"/api/v1/users/login",data:{email:t,password:e}});"success"===r.data.status&&(re("success","logged in successfully."),window.setTimeout(()=>{location.assign("/")},600))}catch(t){re("error",t.response.data.message)}},rn=async()=>{try{let t=await axios({method:"GET",url:"/api/v1/users/logout"});"success"===t.data.status&&(re("success","logged out successfully!"),location.reload(!0)),"/me"===window.location.pathname&&location.assign("/")}catch(t){re("error",t)}},ro=async(t,e)=>{try{let r=await axios({method:"PATCH",url:"password"===e?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",data:t});"success"===r.data.status&&(re("success",`${e.toUpperCase()} updated successfully.`),window.setTimeout(()=>{location.assign("/me")},1500))}catch(t){re("error",t.response.data.message)}},ra=Stripe("pk_test_51NPfK6FKSSyfwekjEM1kRbs1o8rx9vhOwuH1jlH5Ny2ab5PUkadDtR9g3bRCfyPUhnEHkjQayik9qe3S9p2943nJ00OvDbNEJh"),ri=async t=>{try{let e=await axios({url:`/api/v1/bookings/checkout-session/${t}`});await ra.redirectToCheckout({sessionId:e.data.session.id})}catch(t){console.log(t),re("error",t)}},ru=document.getElementById("map"),rc=document.querySelector(".form--login"),rs=document.querySelector(".nav__el--logout"),rl=document.querySelector(".form-user-data"),rp=document.querySelector(".form-user-password"),rf=document.getElementById("book-tour");if(ru){let t=JSON.parse(ru.dataset.locations);(t=>{var e=L.map("map",{zoomControl:!1});L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);var r=L.icon({iconUrl:"/img/pin.png",iconSize:[32,40],iconAnchor:[16,45],popupAnchor:[0,-50]});let n=[];t.forEach(t=>{n.push([t.coordinates[1],t.coordinates[0]]),L.marker([t.coordinates[1],t.coordinates[0]],{icon:r}).addTo(e).bindPopup(`<p>Day ${t.day}: ${t.description}</p>`,{autoClose:!1,closeButton:!1,className:"mappopup"}).on("mouseover",function(t){this.openPopup()}).on("mouseout",function(t){this.closePopup()})});let o=L.latLngBounds(n).pad(.5);e.fitBounds(o),e.scrollWheelZoom.disable()})(t)}rc&&rc.addEventListener("submit",t=>{t.preventDefault();let e=document.getElementById("email").value,r=document.getElementById("password").value;rr(e,r)}),rs&&rs.addEventListener("click",rn),rl&&rl.addEventListener("submit",t=>{t.preventDefault();let e=new FormData;e.append("name",document.getElementById("name").value),e.append("email",document.getElementById("email").value),e.append("photo",document.getElementById("photo").files[0]),ro(e,"data")}),rp&&rp.addEventListener("submit",async t=>{t.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";let e=document.getElementById("password-current").value,r=document.getElementById("password").value,n=document.getElementById("password-confirm").value;await ro({passwordCurrent:e,password:r,passwordConfirm:n},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""}),rf&&rf.addEventListener("click",t=>{t.target.textContent="processing...";let{tourId:e}=t.target.dataset;ri(e)});const rd=document.querySelector("body").dataset.alert;rd&&re("success",rd,20);
//# sourceMappingURL=index.js.map
